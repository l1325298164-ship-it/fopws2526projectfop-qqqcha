# ç‰¹æ•ˆç®¡ç†å™¨æ›´æ–°è°ƒç”¨æ£€æŸ¥æŠ¥å‘Š

## âœ… æ£€æŸ¥ç»“æœï¼šæ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨éƒ½æœ‰æ­£ç¡®çš„æ›´æ–°è°ƒç”¨

### ğŸ“Š GameManagerç®¡ç†çš„ç‰¹æ•ˆç®¡ç†å™¨

æ‰€æœ‰é€šè¿‡GameManagerç®¡ç†çš„ç‰¹æ•ˆç®¡ç†å™¨éƒ½åœ¨ `GameManager.update()` ä¸­ç»Ÿä¸€æ›´æ–°ï¼š

| ç‰¹æ•ˆç®¡ç†å™¨ | æ›´æ–°ä½ç½® | çŠ¶æ€ |
|-----------|---------|------|
| `bobaBulletEffectManager` | GameManager.update():382 | âœ… æ­£ç¡® |
| `itemEffectManager` | GameManager.update():388 | âœ… æ­£ç¡® |
| `trapEffectManager` | GameManager.update():389 | âœ… æ­£ç¡® |
| `combatEffectManager` | GameManager.update():390 | âœ… æ­£ç¡® |
| `playerSpawnPortal` | GameManager.update():323 | âœ… æ­£ç¡® |

**æ›´æ–°ä»£ç ä½ç½®**ï¼š`GameManager.java:381-390`
```java
bobaBulletEffectManager.addBullets(bullets);
bobaBulletEffectManager.update(delta);

// ... å…¶ä»–é€»è¾‘ ...

if (itemEffectManager != null) itemEffectManager.update(delta);
if (trapEffectManager != null) trapEffectManager.update(delta);
if (combatEffectManager != null) combatEffectManager.update(delta);
```

---

### ğŸ“Š ç‹¬ç«‹åˆ›å»ºçš„ç‰¹æ•ˆç®¡ç†å™¨

è¿™äº›ç‰¹æ•ˆç®¡ç†å™¨ä¸åœ¨GameManagerä¸­ï¼Œéœ€è¦å„è‡ªæ›´æ–°ï¼š

| ç‰¹æ•ˆç®¡ç†å™¨ | åˆ›å»ºä½ç½® | æ›´æ–°ä½ç½® | çŠ¶æ€ |
|-----------|---------|---------|------|
| `QTEScreen_double.rippleManager` | QTEScreen_double.show():188 | QTEScreen_double.render():278 | âœ… æ­£ç¡® |
| `MazeGameTutorialScreen.goalPortal` | MazeGameTutorialScreen.show():148 | MazeGameTutorialScreen.render():550 | âœ… æ­£ç¡® |
| `ExitDoor.portalEffect` | ExitDooræ„é€ å‡½æ•°:21 | ExitDoor.update():89 | âœ… æ­£ç¡® |

**è¯¦ç»†è¯´æ˜**ï¼š

1. **QTERippleManager** (QTEScreen_double)
   - åˆ›å»ºï¼š`show()` æ–¹æ³•ä¸­
   - æ›´æ–°ï¼š`render()` æ–¹æ³•ä¸­ï¼Œæ¯æ¬¡æ¸²æŸ“å‰æ›´æ–°
   - æ¸…ç†ï¼š`dispose()` æ–¹æ³•ä¸­

2. **PortalEffectManager** (MazeGameTutorialScreen)
   - åˆ›å»ºï¼š`show()` æ–¹æ³•ä¸­
   - æ›´æ–°ï¼š`render()` æ–¹æ³•ä¸­ï¼Œæ¯æ¬¡æ¸²æŸ“å‰æ›´æ–°
   - æ¸…ç†ï¼šéœ€è¦æ£€æŸ¥ï¼ˆå¯èƒ½åœ¨disposeä¸­ï¼‰

3. **PortalEffectManager** (ExitDoor)
   - åˆ›å»ºï¼šæ„é€ å‡½æ•°ä¸­
   - æ›´æ–°ï¼š`ExitDoor.update()` æ–¹æ³•ä¸­ï¼ˆ89è¡Œï¼‰
   - è°ƒç”¨é“¾ï¼š`GameManager.update()` â†’ `currentExitDoor.update(delta, this)` (331è¡Œ) â†’ `portalEffect.update(delta)`
   - æ¸…ç†ï¼š`ExitDoor.dispose()` ä¸­

---

### ğŸ“Š Screenä¸­çš„è°ƒç”¨é“¾

#### GameScreen
```
render() â†’ gm.update(delta) â†’ GameManager.update() â†’ æ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨æ›´æ–°
```
âœ… **æ­£ç¡®**ï¼šé€šè¿‡GameManagerç»Ÿä¸€æ›´æ–°

#### EndlessScreen
```
render() â†’ gm.update(gameDelta) â†’ GameManager.update() â†’ æ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨æ›´æ–°
```
âœ… **æ­£ç¡®**ï¼šé€šè¿‡GameManagerç»Ÿä¸€æ›´æ–°

#### QTEScreen_double
```
render() â†’ rippleManager.update(delta) (ç›´æ¥æ›´æ–°)
```
âœ… **æ­£ç¡®**ï¼šç‹¬ç«‹ç®¡ç†ï¼Œç›´æ¥æ›´æ–°

#### MazeGameTutorialScreen
```
render() â†’ goalPortal.update(delta) (ç›´æ¥æ›´æ–°)
```
âœ… **æ­£ç¡®**ï¼šç‹¬ç«‹ç®¡ç†ï¼Œç›´æ¥æ›´æ–°

---

## âœ… ç»“è®º

**æ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨éƒ½æœ‰æ­£ç¡®çš„æ›´æ–°è°ƒç”¨ï¼**

### æ›´æ–°æœºåˆ¶æ€»ç»“

1. **GameManagerç®¡ç†çš„ç‰¹æ•ˆ**ï¼š
   - ç»Ÿä¸€åœ¨ `GameManager.update()` ä¸­æ›´æ–°
   - æ‰€æœ‰Screené€šè¿‡è°ƒç”¨ `gm.update(delta)` é—´æ¥æ›´æ–°è¿™äº›ç‰¹æ•ˆ

2. **ç‹¬ç«‹åˆ›å»ºçš„ç‰¹æ•ˆ**ï¼š
   - å„è‡ªåœ¨ç›¸åº”çš„Screenæˆ–Entityçš„æ›´æ–°æ–¹æ³•ä¸­æ›´æ–°
   - éƒ½æœ‰æ˜ç¡®çš„æ›´æ–°è°ƒç”¨

3. **æ²¡æœ‰å‘ç°é—æ¼**ï¼š
   - æ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨éƒ½æœ‰å¯¹åº”çš„updateè°ƒç”¨
   - æ›´æ–°æ—¶æœºæ­£ç¡®ï¼ˆåœ¨æ¸²æŸ“å‰æ›´æ–°ï¼‰

---

## ğŸ¯ å»ºè®®

è™½ç„¶å½“å‰å®ç°æ˜¯æ­£ç¡®çš„ï¼Œä½†ä¸ºäº†æ›´å¥½çš„ä»£ç ç»„ç»‡å’Œç»´æŠ¤æ€§ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. **ç»Ÿä¸€æ›´æ–°æ¥å£**ï¼š
   - ä¸ºæ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨åˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„æ¥å£
   - åœ¨GameManagerä¸­ç»´æŠ¤æ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨çš„åˆ—è¡¨
   - ç»Ÿä¸€è°ƒç”¨updateæ–¹æ³•

2. **æ–‡æ¡£åŒ–**ï¼š
   - åœ¨ä»£ç æ³¨é‡Šä¸­æ˜ç¡®è¯´æ˜å“ªäº›ç‰¹æ•ˆç®¡ç†å™¨ç”±GameManagerç®¡ç†
   - å“ªäº›æ˜¯ç‹¬ç«‹ç®¡ç†çš„

3. **æ€§èƒ½ç›‘æ§**ï¼š
   - å¯ä»¥æ·»åŠ ç»Ÿä¸€çš„æ€§èƒ½ç›‘æ§ï¼Œè·Ÿè¸ªæ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨çš„æ›´æ–°è€—æ—¶

---

## âœ… æœ€ç»ˆç»“è®º

**é—®é¢˜å·²è§£å†³**ï¼šæ‰€æœ‰ç‰¹æ•ˆç®¡ç†å™¨éƒ½æœ‰æ­£ç¡®çš„æ›´æ–°è°ƒç”¨ï¼Œæ²¡æœ‰å‘ç°é—æ¼æˆ–ä¸ä¸€è‡´çš„æƒ…å†µã€‚
